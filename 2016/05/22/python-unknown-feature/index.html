<!doctype html><html class="theme-next mist use-motion"><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1"><meta http-equiv=Cache-Control content=no-transform><meta http-equiv=Cache-Control content=no-siteapp><link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel=stylesheet type=text/css><link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel=stylesheet type=text/css><link href="/css/main.css?v=5.0.1" rel=stylesheet type=text/css><meta name=keywords content=python,><link rel=alternate href=/atom.xml title="Vito's TecH sTacK" type=application/atom+xml><link rel="shortcut icon" type=image/x-icon href="/favicon.ico?v=5.0.1"><meta name=description content="python unknown feature"><meta property=og:type content=article><meta property=og:title content=Python“不为人知的”特性><meta property=og:url content=http://www.vitostack.com/2016/05/22/python-unknown-feature/index.html><meta property=og:site_name content="Vito's TecH sTacK"><meta property=og:description content="python unknown feature"><meta property=og:updated_time content=2016-05-22T05:20:41.000Z><meta name=twitter:card content=summary><meta name=twitter:title content=Python“不为人知的”特性><meta name=twitter:description content="python unknown feature"><script type=text/javascript id=hexo.configuration>
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Vito'
    }
  };
</script><title>Python“不为人知的”特性 | Vito's TecH sTacK</title></head><body itemscope itemtype=http://schema.org/WebPage lang=zh-Hans><script type=text/javascript>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?8eda41252a1f0cf391f04b5f74662966";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><div class="container one-collumn sidebar-position-left page-post-detail"><div class=headband></div><header id=header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-meta><div class=custom-logo-site-title><a href="/" class=brand rel=start><span class=logo-line-before><i></i></span> <span class=site-title>Vito's TecH sTacK</span> <span class=logo-line-after><i></i></span></a></div><p class=site-subtitle>Life is short, why you become a developer?</p></div><div class=site-nav-toggle><button><span class=btn-bar></span> <span class=btn-bar></span> <span class=btn-bar></span></button></div><nav class=site-nav><ul id=menu class=menu><li class="menu-item menu-item-home"><a href="/" rel=section><i class="menu-item-icon fa fa-home fa-fw"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href=/about rel=section><i class="menu-item-icon fa fa-user fa-fw"></i><br>关于</a></li><li class="menu-item menu-item-archives"><a href=/archives rel=section><i class="menu-item-icon fa fa-archive fa-fw"></i><br>归档</a></li><li class="menu-item menu-item-tags"><a href=/tags rel=section><i class="menu-item-icon fa fa-tags fa-fw"></i><br>标签</a></li><li class="menu-item menu-item-guestbook"><a href=/guestbook rel=section><i class="menu-item-icon fa fa-comments fa-fw"></i><br>留言</a></li><li class="menu-item menu-item-search"><a href=# class=st-search-show-outputs><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class=site-search><form class=site-search-form><input type=text id=st-search-input class="st-search-input st-default-search-input"></form><script type=text/javascript>
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'dJNuMs9b_-xzwsco9iLM','2.0.0');
</script></div></nav></div><a href=https://github.com/Vito2015><img style="position: absolute; top: 0; left: 0; border: 0;" src=https://camo.githubusercontent.com/82b228a3648bf44fc1163ef44c62fcc60081495e/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f7265645f6161303030302e706e67 alt="Fork me on GitHub" data-canonical-src=https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png></a></header><main id=main class=main><div class=main-inner><div class=content-wrap><div id=content class=content><div id=posts class=posts-expand><article class="post post-type-normal" itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">Python“不为人知的”特性</h1><div class=post-meta><span class=post-time><span class=post-meta-item-icon><i class="fa fa-calendar-o"></i></span> <span class=post-meta-item-text>发表于</span><time itemprop=dateCreated datetime=2016-05-22T13:15:50+08:00 content=2016-05-22>2016-05-22</time></span> <span class=post-category>&nbsp; | &nbsp; <span class=post-meta-item-icon><i class="fa fa-folder-o"></i></span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=https://schema.org/Thing><a href="/categories/Python/" itemprop=url rel=index><span itemprop=name>Python</span></a></span></span> <span class=post-comments-count>&nbsp; | &nbsp; <a href=/2016/05/22/python-unknown-feature/#comments itemprop=discussionUrl><span class="post-comments-count ds-thread-count" data-thread-key="2016/05/22/python-unknown-feature/" itemprop=commentsCount></span></a></span> <span id="/2016/05/22/python-unknown-feature/" class=leancloud_visitors data-flag-title=Python“不为人知的”特性>&nbsp; | &nbsp; <span class=post-meta-item-icon><i class="fa fa-eye"></i></span> <span class=post-meta-item-text>阅读次数</span> <span class=leancloud-visitors-count></span></span> &nbsp; | &nbsp; <span class=page-pv><i class="fa fa-file-o"></i> <span class=busuanzi-value id=busuanzi_value_page_pv></span></span></div></header><div class=post-body itemprop=articleBody><h2 id=链式比较操作><a href=#链式比较操作 class=headerlink title=链式比较操作></a>链式比较操作</h2><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span>x = <span class=number>5</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=number>1</span> &lt; x &lt; <span class=number>10</span></span><br><span class=line><span class=keyword>True</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=number>10</span> &lt; x &lt; <span class=number>20</span> </span><br><span class=line><span class=keyword>False</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>x &lt; <span class=number>10</span> &lt; x*<span class=number>10</span> &lt; <span class=number>100</span></span><br><span class=line><span class=keyword>True</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=number>10</span> &gt; x &lt;= <span class=number>9</span></span><br><span class=line><span class=keyword>True</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=number>5</span> == x &gt; <span class=number>4</span></span><br><span class=line><span class=keyword>True</span></span><br></pre></td></tr></table></figure><p>你可能认为它执行的过程先是：<code>1 &lt; x</code>，返回True，然后再比较<code>True &lt; 10</code>,当然这么做也是返回True,比较表达式<code>True &lt; 10</code>,因为解释器会把True转换成1，False转换成0。但这里的链式比较解释器在内部并不是这样干的，它会把这种链式的比较操作转换成：<code>1 &lt; x and x &lt; 10</code>，不信你可以看看最后一个例子。这样的链式操作本可以值得所有编程语言拥有，但是很遗憾，其他语言很少有这样的支持。<br><a id=more></a></p><h2 id=enumerate枚举><a href=#enumerate枚举 class=headerlink title=enumerate枚举></a>enumerate枚举</h2><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span>a = [<span class=string>'a'</span>, <span class=string>'b'</span>, <span class=string>'c'</span>, <span class=string>'d'</span>, <span class=string>'e'</span>]</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=keyword>for</span> index, item <span class=keyword>in</span> enumerate(a): <span class=keyword>print</span> index, item</span><br><span class=line>...</span><br><span class=line><span class=number>0</span> a</span><br><span class=line><span class=number>1</span> b</span><br><span class=line><span class=number>2</span> c</span><br><span class=line><span class=number>3</span> d</span><br><span class=line><span class=number>4</span> e</span><br><span class=line>&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>用enumerate包装一个可迭代对象，可以同时使用迭代项和索引，在迭代的同时获取迭代项所在位置时非常方便。如果你不这么干的话，下面有一种比较麻烦的方法：<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>for</span> i <span class=keyword>in</span> range(len(a)):</span><br><span class=line>    <span class=keyword>print</span> i, a[i]</span><br></pre></td></tr></table></figure></p><p>enumerate 还可以接收一个可选参数start，默认start等于0。<code>enumerate(list, start=1)</code>，这样index的起始值就是1</p><h2 id=生成器对象><a href=#生成器对象 class=headerlink title=生成器对象></a>生成器对象</h2><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>x=(n <span class=keyword>for</span> n <span class=keyword>in</span> foo <span class=keyword>if</span> bar(n))  <span class=comment>#foo是可迭代对象</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>type(x)</span><br><span class=line>&lt;type <span class=string>'generator'</span>&gt;</span><br></pre></td></tr></table></figure><p>你可以把生成器对象赋值给x，意味着可以对x进行迭代操作：<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>for</span> n <span class=keyword>in</span> x:</span><br><span class=line>    <span class=keyword>pass</span></span><br></pre></td></tr></table></figure></p><p>它的好处就是不需要存储中间结果，也许你会使用（列表推导式）：<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>x = [n <span class=keyword>for</span> n <span class=keyword>in</span> foo <span class=keyword>if</span> bar(n)]</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>type(x)</span><br><span class=line>&lt;type <span class=string>'list'</span>&gt;</span><br></pre></td></tr></table></figure></p><p>它比生成器对象能带来更快的速度。相对地，生成器更能节省内存开销，它的值是按需生成，不需要像列表推倒式一样把整个结果保存在内存中，同时它不能重新迭代，列表推导式则不然。</p><p>##字典推导式</p><p>在Python2.6以下版本字典生成器可以接受迭代的键值对:<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>d = dict((key, value) <span class=keyword>for</span> (key, value) <span class=keyword>in</span> iterable)</span><br></pre></td></tr></table></figure></p><p>从Python2.7或者Python3以后,你可以直接用字典推导式语法:<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>d = &#123;key: value <span class=keyword>for</span> (key, value) <span class=keyword>in</span> iterable&#125;</span><br></pre></td></tr></table></figure></p><p>你也可以用任何方式的迭代器(元组,列表,生成器..)，只要可迭代对象的元素中有两个值，<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>d = &#123;value: foo(value) <span class=keyword>for</span> value <span class=keyword>in</span> sequence <span class=keyword>if</span> bar(value)&#125;</span><br></pre></td></tr></table></figure></p><p>更为高级的用法：<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=function><span class=keyword>def</span> <span class=title>key_value_gen</span><span class=params>(k)</span>:</span></span><br><span class=line>   <span class=keyword>yield</span> chr(k+<span class=number>65</span>)</span><br><span class=line>   <span class=keyword>yield</span> chr((k+<span class=number>13</span>)%<span class=number>26</span>+<span class=number>65</span>)</span><br><span class=line>d = dict(map(key_value_gen, range(<span class=number>26</span>)))</span><br></pre></td></tr></table></figure></p><p>##<code>iter()</code>可接收callable参数</p><p><code>iter()</code>内建函数接收的参数分为两种，第一种是：<br><code>iter(collection)---&gt; iterator</code><br>参数collection必须是可迭代对象或者是序列 ，第二种是：<br><code>iter（callable， sentinel) --&gt; iterator</code><br>callable函数会一直被调用，直到它的返回结果等于sentinel，例如：<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=function><span class=keyword>def</span> <span class=title>seek_next_line</span><span class=params>(f)</span>:</span></span><br><span class=line>    <span class=comment>#每次读一个字符，直到出现换行符就返回</span></span><br><span class=line>    <span class=keyword>for</span> c <span class=keyword>in</span> iter(<span class=keyword>lambda</span>: f.read(<span class=number>1</span>),<span class=string>'\n'</span>):</span><br><span class=line>        <span class=keyword>pass</span></span><br></pre></td></tr></table></figure></p><h2 id=小心可变的默认参数><a href=#小心可变的默认参数 class=headerlink title=小心可变的默认参数></a>小心可变的默认参数</h2><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=function><span class=keyword>def</span> <span class=title>foo</span><span class=params>(x=[])</span>:</span></span><br><span class=line><span class=meta>... </span>    x.append(<span class=number>1</span>)</span><br><span class=line><span class=meta>... </span>    <span class=keyword>print</span> x</span><br><span class=line><span class=meta>... </span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>foo()</span><br><span class=line>[<span class=number>1</span>]</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>foo()</span><br><span class=line>[<span class=number>1</span>, <span class=number>1</span>]</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>foo()</span><br><span class=line>[<span class=number>1</span>, <span class=number>1</span>, <span class=number>1</span>]</span><br></pre></td></tr></table></figure><p>取而代之的是你应该使用一个标记值表示“没有指定”来替换可变对象，如：<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=function><span class=keyword>def</span> <span class=title>foo</span><span class=params>(x=None)</span>:</span></span><br><span class=line><span class=meta>... </span>    <span class=keyword>if</span> x <span class=keyword>is</span> <span class=keyword>None</span>:</span><br><span class=line><span class=meta>... </span>        x = []</span><br><span class=line><span class=meta>... </span>    x.append(<span class=number>1</span>)</span><br><span class=line><span class=meta>... </span>    <span class=keyword>print</span> x</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>foo()</span><br><span class=line>[<span class=number>1</span>]</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>foo()</span><br><span class=line>[<span class=number>1</span>]</span><br></pre></td></tr></table></figure></p><p>##发送值到生成器函数在中<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line><span class=function><span class=keyword>def</span> <span class=title>mygen</span><span class=params>()</span>:</span></span><br><span class=line>    <span class=string>"""Yield 5 until something else is passed back via send()"""</span></span><br><span class=line>    a = <span class=number>5</span></span><br><span class=line>    <span class=keyword>while</span> <span class=keyword>True</span>:</span><br><span class=line>        f = (<span class=keyword>yield</span> a) <span class=comment>#yield a and possibly get f in return</span></span><br><span class=line>        <span class=keyword>if</span> f <span class=keyword>is</span> <span class=keyword>not</span> <span class=keyword>None</span>: </span><br><span class=line>            a = f  <span class=comment>#store the new value</span></span><br></pre></td></tr></table></figure></p><p>你可以：<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span>g = mygen()</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>g.next()</span><br><span class=line><span class=number>5</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>g.next()</span><br><span class=line><span class=number>5</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>g.send(<span class=number>7</span>)  <span class=comment>#we send this back to the generator</span></span><br><span class=line><span class=number>7</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>g.next() <span class=comment>#now it will yield 7 until we send something else</span></span><br><span class=line><span class=number>7</span></span><br></pre></td></tr></table></figure></p><h2 id=如果你不喜欢使用空格缩进，那么可以使用C语言花括号-定义函数：><a href=#如果你不喜欢使用空格缩进，那么可以使用C语言花括号-定义函数： class=headerlink title=如果你不喜欢使用空格缩进，那么可以使用C语言花括号{}定义函数：></a>如果你不喜欢使用空格缩进，那么可以使用C语言花括号{}定义函数：</h2><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=keyword>from</span> __future__ <span class=keyword>import</span> braces   <span class=comment>#这里的braces 指的是：curly braces（花括号）</span></span><br><span class=line>  File <span class=string>"&lt;stdin&gt;"</span>, line <span class=number>1</span></span><br><span class=line>SyntaxError: <span class=keyword>not</span> a chance</span><br></pre></td></tr></table></figure><p>当然这仅仅是一个玩笑，想用花括号定义函数？没门。感兴趣的还可以了解下：<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>from</span> __future__ <span class=keyword>import</span> barry_as_FLUFL</span><br></pre></td></tr></table></figure></p><p>不过这是python3里面的特性，<a href="http://www.python.org/dev/peps/pep-0401/" target=_blank rel=external>http://www.python.org/dev/peps/pep-0401/</a></p><h2 id=切片操作中的步长参数><a href=#切片操作中的步长参数 class=headerlink title=切片操作中的步长参数></a>切片操作中的步长参数</h2><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br></pre></td><td class=code><pre><span class=line>a = [<span class=number>1</span>,<span class=number>2</span>,<span class=number>3</span>,<span class=number>4</span>,<span class=number>5</span>]</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>a[::<span class=number>2</span>]  <span class=comment># iterate over the whole list in 2-increments</span></span><br><span class=line>[<span class=number>1</span>,<span class=number>3</span>,<span class=number>5</span>]</span><br></pre></td></tr></table></figure><p>还有一个特例：x[::-1]，反转列表：<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span>a[::<span class=number>-1</span>]</span><br><span class=line>[<span class=number>5</span>,<span class=number>4</span>,<span class=number>3</span>,<span class=number>2</span>,<span class=number>1</span>]</span><br></pre></td></tr></table></figure></p><p>有关反转，还有两个函数<code>reverse</code>、<code>reversed</code>，<code>reverse</code>是list对象的方法，没有返回值，而<code>reversed</code>是内建方法，可接收的参数包括tuple、string、list、unicode，以及用户自定义的类型，返回一个迭代器。<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span>l = range(<span class=number>5</span>)</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>l</span><br><span class=line>[<span class=number>0</span>, <span class=number>1</span>, <span class=number>2</span>, <span class=number>3</span>, <span class=number>4</span>]</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>l.reverse()</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>l</span><br><span class=line>[<span class=number>4</span>, <span class=number>3</span>, <span class=number>2</span>, <span class=number>1</span>, <span class=number>0</span>]</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>l2 = reversed(l)</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>l2</span><br><span class=line>&lt;listreverseiterator object at <span class=number>0x99faeec</span>&gt;</span><br></pre></td></tr></table></figure></p><h2 id=装饰器><a href=#装饰器 class=headerlink title=装饰器></a>装饰器</h2><p>装饰器使一个函数或方法包装在另一个函数里头，可以在被包装的函数添加一些额外的功能，比如日志，还可以对参数、返回结果进行修改。装饰器有点类似Java中的AOP。下面这个例子是打印被装饰的函数里面的参数的装饰器，<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=function><span class=keyword>def</span> <span class=title>print_args</span><span class=params>(function)</span>:</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>    <span class=function><span class=keyword>def</span> <span class=title>wrapper</span><span class=params>(*args, **kwargs)</span>:</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>        <span class=keyword>print</span> <span class=string>'Arguments:'</span>, args, kwargs</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>        <span class=keyword>return</span> function(*args, **kwargs)</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>    <span class=keyword>return</span> wrapper</span><br><span class=line></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>@print_args</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=function><span class=keyword>def</span> <span class=title>write</span><span class=params>(text)</span>:</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>    <span class=keyword>print</span> text</span><br><span class=line></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>write(<span class=string>'foo'</span>)</span><br><span class=line>Arguments: (<span class=string>'foo'</span>,) &#123;&#125;</span><br><span class=line>foo</span><br></pre></td></tr></table></figure></p><p>@是语法糖，它等价于：<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span>write = print_args(write)</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>write(<span class=string>'foo'</span>)</span><br><span class=line>arguments: (<span class=string>'foo'</span>,) &#123;&#125;</span><br><span class=line>foo</span><br><span class=line></span><br><span class=line><span class=keyword>for</span> ... <span class=keyword>else</span>语法</span><br><span class=line><span class=keyword>for</span> i <span class=keyword>in</span> foo:</span><br><span class=line>    <span class=keyword>if</span> i == <span class=number>0</span>:</span><br><span class=line>        <span class=keyword>break</span></span><br><span class=line><span class=keyword>else</span>:</span><br><span class=line>    print(<span class=string>"i was never 0"</span>)</span><br></pre></td></tr></table></figure></p><p>else代码块只有在for循环正常结束后执行如果遇到break语句那么不会执行else语句块，等价于下面：<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line>found = <span class=keyword>False</span></span><br><span class=line><span class=keyword>for</span> i <span class=keyword>in</span> foo:</span><br><span class=line>    <span class=keyword>if</span> i == <span class=number>0</span>:</span><br><span class=line>        found = <span class=keyword>True</span></span><br><span class=line>        <span class=keyword>break</span></span><br><span class=line><span class=keyword>if</span> <span class=keyword>not</span> found: </span><br><span class=line>    print(<span class=string>"i was never 0"</span>)</span><br></pre></td></tr></table></figure></p><p>不过这种语法看起来怪怪地，让人感觉是else块是在for语句块没有执行的时候执行的，很容易让人去类比 if else 的语法，如果是把else换成finally或许更容易理解</p><h2 id=python2-5中的missing方法><a href=#python2-5中的missing方法 class=headerlink title=python2.5中的missing方法></a>python2.5中的<strong>missing</strong>方法</h2><p>dict的子类如果定义了方法<code>__missing__(self, key)</code>，如果key不再dict中，那么d[key]就会调用<code>__missing__</code>方法，而且d[key]的返回值就是<code>__missing__</code>的返回值。<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=class><span class=keyword>class</span> <span class=title>MyDict</span><span class=params>(dict)</span>:</span></span><br><span class=line><span class=meta>... </span> <span class=function><span class=keyword>def</span> <span class=title>__missing__</span><span class=params>(self, key)</span>:</span></span><br><span class=line><span class=meta>... </span>  self[key] = rv = []</span><br><span class=line><span class=meta>... </span>  <span class=keyword>return</span> rv</span><br><span class=line><span class=meta>... </span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>m = MyDict()</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>m[<span class=string>"foo"</span>].append(<span class=number>1</span>)</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>m[<span class=string>"foo"</span>].append(<span class=number>2</span>)</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>dict(m)</span><br><span class=line>&#123;<span class=string>'foo'</span>: [<span class=number>1</span>, <span class=number>2</span>]&#125;</span><br></pre></td></tr></table></figure></p><p>在collections模块下有一个叫defaultdict的dict子类，它与missing非常类似，但是对于不存在的项不需要传递参数。<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=keyword>from</span> collections <span class=keyword>import</span> defaultdict</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>m = defaultdict(list)</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>m[<span class=string>"foo"</span>].append(<span class=number>1</span>)</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>m[<span class=string>"foo"</span>].append(<span class=number>2</span>)</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>dict(m)</span><br><span class=line>&#123;<span class=string>'foo'</span>: [<span class=number>1</span>, <span class=number>2</span>]&#125;</span><br></pre></td></tr></table></figure></p><h2 id=变量值交换><a href=#变量值交换 class=headerlink title=变量值交换></a>变量值交换</h2><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span>a = <span class=number>10</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>b = <span class=number>5</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>a, b</span><br><span class=line>(<span class=number>10</span>, <span class=number>5</span>)</span><br><span class=line></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>a, b = b, a</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>a, b</span><br><span class=line>(<span class=number>5</span>, <span class=number>10</span>)</span><br></pre></td></tr></table></figure><p>等号右边是一个创建元组的表达式，等号左边解压（没有引用的）元组分别赋给名称（变量）a和b。赋完值后因为没有被其他名字引用，因此被标记之后被垃圾收集器回收，而绑定到a和b的值已经被交换了。</p><p>注意：多值赋值其实仅仅就是元组打包和序列解包的组合的过程</p><h2 id=可读的正则表达式><a href=#可读的正则表达式 class=headerlink title=可读的正则表达式></a>可读的正则表达式</h2><p>在Python中你可以把正则表达式分割成多行写，还可以写注释<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span>pattern = <span class=string>"""</span><br><span class=line><span class=meta>... </span>^                   # beginning of string</span><br><span class=line><span class=meta>... </span>M&#123;0,4&#125;              # thousands - 0 to 4 M's</span><br><span class=line><span class=meta>... </span>(CM|CD|D?C&#123;0,3&#125;)    # hundreds - 900 (CM), 400 (CD), 0-300 (0 to 3 C's),</span><br><span class=line><span class=meta>... </span>                    #            or 500-800 (D, followed by 0 to 3 C's)</span><br><span class=line><span class=meta>... </span>(XC|XL|L?X&#123;0,3&#125;)    # tens - 90 (XC), 40 (XL), 0-30 (0 to 3 X's),</span><br><span class=line><span class=meta>... </span>                    #        or 50-80 (L, followed by 0 to 3 X's)</span><br><span class=line><span class=meta>... </span>(IX|IV|V?I&#123;0,3&#125;)    # ones - 9 (IX), 4 (IV), 0-3 (0 to 3 I's),</span><br><span class=line><span class=meta>... </span>                    #        or 5-8 (V, followed by 0 to 3 I's)</span><br><span class=line><span class=meta>... </span>$                   # end of string</span><br><span class=line><span class=meta>... </span>"""</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>re.search(pattern, <span class=string>'M'</span>, re.VERBOSE)</span><br></pre></td></tr></table></figure></p><h2 id=函数参数解包-unpacking><a href=#函数参数解包-unpacking class=headerlink title=函数参数解包(unpacking)></a>函数参数解包(unpacking)</h2><p>分别使用和*解包列表和字典,这是一种非常实用的快捷方式,因为list,tuple,dict作为容器被广泛使用<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line><span class=function><span class=keyword>def</span> <span class=title>draw_point</span><span class=params>(x, y)</span>:</span></span><br><span class=line>    <span class=comment># do some magic</span></span><br><span class=line></span><br><span class=line>point_foo = (<span class=number>3</span>, <span class=number>4</span>)</span><br><span class=line>point_bar = &#123;<span class=string>'y'</span>: <span class=number>3</span>, <span class=string>'x'</span>: <span class=number>2</span>&#125;</span><br><span class=line></span><br><span class=line>draw_point(*point_foo)</span><br><span class=line>draw_point(**point_bar)</span><br></pre></td></tr></table></figure></p><p>动态地创建新类型</p><p>动态创建新类型虽不是实用功能,但了解一下也是有好处的<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span>NewType = type(<span class=string>"NewType"</span>, (object,), &#123;<span class=string>"x"</span>: <span class=string>"hello"</span>&#125;)</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>n = NewType()</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>n.x</span><br><span class=line><span class=string>"hello"</span></span><br></pre></td></tr></table></figure></p><p>type的第一个参数就是类名,第二个参数是继承的父类,第三个参数是类的属性.它完全等同于:<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span><span class=class><span class=keyword>class</span> <span class=title>NewType</span><span class=params>(object)</span>:</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>    x = <span class=string>"hello"</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>n = NewType()</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>n.x</span><br><span class=line><span class=string>"hello"</span></span><br></pre></td></tr></table></figure></p><h2 id=上下文管理器与with语句><a href=#上下文管理器与with语句 class=headerlink title=上下文管理器与with语句></a>上下文管理器与with语句</h2><p>上下文管理器(context manager)用于规定某个对象的使用范围,进入或退出该范围时,特殊的操作会被执行(比如关闭连接,释放内存等等),语法是:<code>with... as ...</code>,该特性在python2.5引入的. 上下文管理器协议有两个方法组成<code>contextmanager.__enter__()</code>和<code>contextmanager.__exit__()</code>,任何实现了这两个方法的对象都称之为上下文管理器对象,比如文件对象就默认实现了该协议.<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>with</span> open(<span class=string>'foo.txt'</span>, <span class=string>'w'</span>) <span class=keyword>as</span> f:</span><br><span class=line>    f.write(<span class=string>'hello!'</span>)</span><br></pre></td></tr></table></figure></p><h2 id=字典的get-方法><a href=#字典的get-方法 class=headerlink title=字典的get()方法></a>字典的get()方法</h2><p>字典的<code>get()</code>方法用来替换d[‘key’],后者如果是遇到key不存在会有异常,如果使用的<code>d.get(&#39;key&#39;)</code>,key不存在时它返回的是None,你可以指定两个参数如:<code>d.get(&#39;key&#39;,0)</code>来用0取代返回的None<br><figure class="highlight py"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>sum[value] = sum.get(value, <span class=number>0</span>) + <span class=number>1</span></span><br></pre></td></tr></table></figure></p><p>还有一个类似的方法<code>setdefault(key, value)</code>,如果字典中存在key,那么就直接返回d[key],否则设置<code>d[key]=value</code>,并返回该值.<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span>d = &#123;<span class=string>'key'</span>:<span class=number>123</span>&#125;</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>d.setdefault(<span class=string>'key'</span>,<span class=number>456</span>)</span><br><span class=line><span class=number>123</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>d[<span class=string>'key'</span>]</span><br><span class=line><span class=number>123</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>d.setdefault(<span class=string>'key2'</span>,<span class=number>456</span>)</span><br><span class=line><span class=number>456</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>d[<span class=string>'key2'</span>]</span><br><span class=line><span class=number>456</span></span><br></pre></td></tr></table></figure></p><p>collections.Counter是dict的子类,用来统计可哈稀对象,<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br></pre></td><td class=code><pre><span class=line><span class=meta>&gt;&gt;&gt; </span>cnt = Counter(<span class=string>'helloworld'</span>)</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>cnt</span><br><span class=line>Counter(&#123;<span class=string>'l'</span>: <span class=number>3</span>, <span class=string>'o'</span>: <span class=number>2</span>, <span class=string>'e'</span>: <span class=number>1</span>, <span class=string>'d'</span>: <span class=number>1</span>, <span class=string>'h'</span>: <span class=number>1</span>, <span class=string>'r'</span>: <span class=number>1</span>, <span class=string>'w'</span>: <span class=number>1</span>&#125;)</span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>cnt[<span class=string>'l'</span>]</span><br><span class=line><span class=number>3</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>cnt[<span class=string>'x'</span>] = <span class=number>10</span></span><br><span class=line><span class=meta>&gt;&gt;&gt; </span>cnt.get(<span class=string>'y'</span>)</span><br></pre></td></tr></table></figure></p><h2 id=描述符-Descriptors><a href=#描述符-Descriptors class=headerlink title=描述符(Descriptors)></a>描述符(Descriptors)</h2><p>描述符是python的核心特新之一,当你使用.访问成员时,(如:x.y),python首先在实例字典中查找该成员,如果没有发现再从类字典中查找,如果这个对象实现了描述符(实现了<code>__get__</code>,<code>__set__</code>,<code>__delete__</code>),那么优先返回<code>__get__</code>方法的返回值.</p><p>##条件赋值</p><p>为什么python中没有类c语言的三目运算符,Guido van Rossum说过了,条件赋值更容易理解<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>x = <span class=number>3</span> <span class=keyword>if</span> (y == <span class=number>1</span>) <span class=keyword>else</span> <span class=number>2</span></span><br></pre></td></tr></table></figure></p><p>这个表达式的意思就是:如果y等于那么就把3赋值给x,否则把2赋值给x, 条件中的括号是可选的,为了可读性可以考虑加上去.if else中的表达式可以是任何类型的,既可以函数,还可以类<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>(func1 <span class=keyword>if</span> y == <span class=number>1</span> <span class=keyword>else</span> func2)(arg1, arg2)</span><br></pre></td></tr></table></figure></p><p>如果y等于1,那么调用func1(arg1,arg2)否则调用func2(arg1,arg2)<br><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br></pre></td><td class=code><pre><span class=line>x = (class1 <span class=keyword>if</span> y == <span class=number>1</span> <span class=keyword>else</span> class2)(arg1, arg2)</span><br></pre></td></tr></table></figure></p><p>class1,class2是两个类</p><h2 id=异常else语句块><a href=#异常else语句块 class=headerlink title=异常else语句块></a>异常else语句块</h2><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br></pre></td><td class=code><pre><span class=line><span class=keyword>try</span>:</span><br><span class=line>   try_this(whatever)</span><br><span class=line><span class=keyword>except</span> SomeException, exception:</span><br><span class=line>   <span class=comment>#Handle exception</span></span><br><span class=line><span class=keyword>else</span>:</span><br><span class=line>    <span class=comment># do something</span></span><br><span class=line><span class=keyword>finally</span>:</span><br><span class=line>    <span class=comment>#do something</span></span><br></pre></td></tr></table></figure><p>else语句块会在没有异常的情况下执行,先于finally,它的好处就是你可以明确知道它会在没有异常的情况下执行,如果是把else语句块放在try语句块里面就达不到这种效果.</p><hr><p>原文链接：<a href=http://foofish.net/blog/25/python-tricks-tips target=_blank rel=external>http://foofish.net/blog/25/python-tricks-tips</a></p></div><div><div id=wechat_subscriber style="display: block； padding: 10px 0; margin: 20px auto; width: 100%; text-align: center"><img id=wechat_subscriber_qcode src=/images/qrcode_vitostack.jpg alt="Vito wechat" style="width: 200px; max-width: 100%;"><div>欢迎关注我的公众号：VitoStackBlog。</div></div></div><div></div><footer class=post-footer><div class=post-tags><a href="/tags/python/" rel=tag>#python</a></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href="/2016/05/10/python-crawer-skill/" rel=next title=python爬虫－常用技巧><i class="fa fa-chevron-left"></i> python爬虫－常用技巧</a></div><div class="post-nav-prev post-nav-item"></div></div></footer></article><div class=post-spread><div class="ds-share flat" data-thread-key="2016/05/22/python-unknown-feature/" data-title=Python“不为人知的”特性 data-content data-url="http://www.vitostack.com/2016/05/22/python-unknown-feature/"><div class=ds-share-inline><ul class=ds-share-icons-16><li data-toggle=ds-share-icons-more><a class=ds-more href=javascript:void(0);>分享到：</a></li><li><a class=ds-weibo href=javascript:void(0); data-service=weibo>微博</a></li><li><a class=ds-qzone href=javascript:void(0); data-service=qzone>QQ空间</a></li><li><a class=ds-qqt href=javascript:void(0); data-service=qqt>腾讯微博</a></li><li><a class=ds-wechat href=javascript:void(0); data-service=wechat>微信</a></li></ul><div class=ds-share-icons-more></div></div></div></div></div></div><div class=comments id=comments><div class=ds-thread data-thread-key="2016/05/22/python-unknown-feature/" data-title=Python“不为人知的”特性 data-url="http://www.vitostack.com/2016/05/22/python-unknown-feature/"></div></div></div><div class=sidebar-toggle><div class=sidebar-toggle-line-wrap><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id=sidebar class=sidebar><div class=sidebar-inner><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target=post-toc-wrap>文章目录</li><li class=sidebar-nav-overview data-target=site-overview>站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image src=/images/avatar.jpg alt=Vito><p class=site-author-name itemprop=name>Vito</p><p class="site-description motion-element" itemprop=description>Life is short, why you become a developer?</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href=/archives><span class=site-state-item-count>10</span> <span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><span class=site-state-item-count>4</span> <span class=site-state-item-name>分类</span></div><div class="site-state-item site-state-tags"><a href=/tags><span class=site-state-item-count>12</span> <span class=site-state-item-name>标签</span></a></div></nav><div class="feed-link motion-element"><a href=/atom.xml rel=alternate><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class=links-of-author-item><a href=https://github.com/Vito2015 target=_blank title=GitHub><i class="fa fa-github"></i> GitHub</a></span> <span class=links-of-author-item><a href=http://weibo.com/1955345990 target=_blank title=Weibo><i class="fa fa-weibo"></i> Weibo</a></span> <span class=links-of-author-item><a href="http://www.cnblogs.com/Vito2008/" target=_blank title=CnBlogs><i class="fa fa-cnblogs"></i> CnBlogs</a></span> <span class=links-of-author-item><a href=https://segmentfault.com/u/vitostack target=_blank title=SegmentFault><i class="fa fa-segmentfault"></i> SegmentFault</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i> Links</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=http://blog.vitostack.com title="Vito's lifeblog" target=_blank>Vito's lifeblog</a></li><li class=links-of-blogroll-item><a href="http://opiece.me/" title=Chillax target=_blank>Chillax</a></li></ul></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class=post-toc><div class=post-toc-content><ol class=nav><li class="nav-item nav-level-2"><a class=nav-link href=#链式比较操作><span class=nav-number>1.</span> <span class=nav-text>链式比较操作</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#enumerate枚举><span class=nav-number>2.</span> <span class=nav-text>enumerate枚举</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#生成器对象><span class=nav-number>3.</span> <span class=nav-text>生成器对象</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#小心可变的默认参数><span class=nav-number>4.</span> <span class=nav-text>小心可变的默认参数</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#如果你不喜欢使用空格缩进，那么可以使用C语言花括号-定义函数：><span class=nav-number>5.</span> <span class=nav-text>如果你不喜欢使用空格缩进，那么可以使用C语言花括号{}定义函数：</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#切片操作中的步长参数><span class=nav-number>6.</span> <span class=nav-text>切片操作中的步长参数</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#装饰器><span class=nav-number>7.</span> <span class=nav-text>装饰器</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#python2-5中的missing方法><span class=nav-number>8.</span> <span class=nav-text>python2.5中的missing方法</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#变量值交换><span class=nav-number>9.</span> <span class=nav-text>变量值交换</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#可读的正则表达式><span class=nav-number>10.</span> <span class=nav-text>可读的正则表达式</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#函数参数解包-unpacking><span class=nav-number>11.</span> <span class=nav-text>函数参数解包(unpacking)</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#上下文管理器与with语句><span class=nav-number>12.</span> <span class=nav-text>上下文管理器与with语句</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#字典的get-方法><span class=nav-number>13.</span> <span class=nav-text>字典的get()方法</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#描述符-Descriptors><span class=nav-number>14.</span> <span class=nav-text>描述符(Descriptors)</span></a></li><li class="nav-item nav-level-2"><a class=nav-link href=#异常else语句块><span class=nav-number>15.</span> <span class=nav-text>异常else语句块</span></a></li></ol></div></div></section></div></aside></div></main><footer id=footer class=footer><div class=footer-inner><div class=copyright>&copy; <span itemprop=copyrightYear>2016</span> <span class=with-love><i class="fa fa-heart"></i></span> <span class=author itemprop=copyrightHolder>Vito</span></div><div class=powered-by>由 <a class=theme-link href=http://hexo.io>Hexo</a> 强力驱动</div><div class=theme-info>主题 - <a class=theme-link href=https://github.com/iissnan/hexo-theme-next>NexT.Mist</a></div><div class=busuanzi-count><script async src=https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js></script><span class=site-uv><i class="fa fa-user"></i><span class=busuanzi-value id=busuanzi_value_site_uv></span></span> <span class=site-pv><i class="fa fa-eye"></i><span class=busuanzi-value id=busuanzi_value_site_pv></span></span></div></div></footer><div class=back-to-top><i class="fa fa-arrow-up"></i></div></div><script type=text/javascript>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script><script type=text/javascript src="/vendors/jquery/index.js?v=2.1.3"></script><script type=text/javascript src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type=text/javascript src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type=text/javascript src="/vendors/velocity/velocity.min.js?v=1.2.1"></script><script type=text/javascript src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script><script type=text/javascript src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type=text/javascript src="/js/src/utils.js?v=5.0.1"></script><script type=text/javascript src="/js/src/motion.js?v=5.0.1"></script><script type=text/javascript src="/js/src/scrollspy.js?v=5.0.1"></script><script type=text/javascript src="/js/src/post-details.js?v=5.0.1"></script><script type=text/javascript src="/js/src/bootstrap.js?v=5.0.1"></script><script type=text/javascript>
    var duoshuoQuery = {short_name:"code-vitostack"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script><script src=https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js></script><script>AV.initialize("LOpG8n71H2qRPltNTFHErGd6-gzGzoHsz", "dxEsNEnda31HqXSQEUq9YjKN");</script><script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script><script type=text/javascript async src=//push.zhanzhang.baidu.com/push.js>
</script></body></html>